<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SDFileIO class | Red Cross</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Red Cross</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-12 m-col-m-none">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          SDFileIO <span class="m-thin">class</span>
          <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="SDFileIO_8hpp.html">&lt;main/fs/SDFileIO.hpp&gt;</a></div>
        </h1>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>A utility for safely operating on an SD card asynchronously over the SPI interface.</p>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#aa278dc1e8f9e39a520b47c748fbfc254" class="m-doc">SDFileIO</a>(</span><span class="m-doc-wrap">const char* prefix = &quot;/sdcard&quot;) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a452951a64afa18614880d15e75b717db" class="m-doc">~SDFileIO</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a53a15061cca1e7a272fd606b88d43a2e" class="m-doc">exists</a>(</span><span class="m-doc-wrap">const string&amp; fileName) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a7d46ac6a2a1e9de575035bcd5f7b485a" class="m-doc">isReady</a>(</span><span class="m-doc-wrap">) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#af7e34f9012374dc9411cafa8a3ff4e50" class="m-doc">mount</a>(</span><span class="m-doc-wrap">) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a7a2340367a4b95c94884be058ca0d063" class="m-doc">printCardInfo</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd></dd>
            <dt>
              <div class="m-doc-template">template&lt;class FStream&gt;</div>
              <span class="m-doc-wrap-bumper">auto <a href="#a09eb67cb5d96201deaaefe38d04f17f3" class="m-doc">openFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              ios_base::openmode mode,
              std::function&lt;bool(FStream&amp;)&gt;&amp;&amp; fileOp) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a87a48c4dfedceff48a209e951f299ee9" class="m-doc">writeFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const vector&lt;string&gt;&amp; data) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a03ad22388a4c6f3f8265dbc204947cfd" class="m-doc">writeBinFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const string&amp; data) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ab01f1777f4670c9cd4c04a0b3c6c2867" class="m-doc">appendFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const vector&lt;string&gt;&amp; data) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ad03e7421e12132dea157e3e3844233a1" class="m-doc">appendBinFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const string&amp; data) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a572558952919c50968f9b0063220be6b" class="m-doc">readFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              string&amp; data) -&gt; bool</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a5a06abe7718fa74b84fadad7650bfdad" class="m-doc">readBinFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              string&amp; data) -&gt; bool</span>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="aa278dc1e8f9e39a520b47c748fbfc254"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aa278dc1e8f9e39a520b47c748fbfc254" class="m-doc-self">SDFileIO</a>(</span><span class="m-doc-wrap">const char* prefix = &quot;/sdcard&quot;) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">prefix</td>
                  <td>the SD card mount point</td>
                </tr>
              </tbody>
            </table>
<p>Explicit value constructor to specify the mount point of the SD card.</p>
          </div></section>
          <section class="m-doc-details" id="a452951a64afa18614880d15e75b717db"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a452951a64afa18614880d15e75b717db" class="m-doc-self">~SDFileIO</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
<p>Destructor. Unmounts the SD card and disables the driver since it&#x27;s no longer needed.</p>
          </div></section>
          <section class="m-doc-details" id="a53a15061cca1e7a272fd606b88d43a2e"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a53a15061cca1e7a272fd606b88d43a2e" class="m-doc-self">exists</a>(</span><span class="m-doc-wrap">const string&amp; fileName)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the file exists</td>
                </tr>
              </tfoot>
            </table>
<p>Checks if the specified file exists on the SD card.</p>
          </div></section>
          <section class="m-doc-details" id="a7d46ac6a2a1e9de575035bcd5f7b485a"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a7d46ac6a2a1e9de575035bcd5f7b485a" class="m-doc-self">isReady</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>the ready state of this SD card</td>
                </tr>
              </tfoot>
            </table>
<p>Whether the SD card is initialized and ready for file IO.</p>
          </div></section>
          <section class="m-doc-details" id="af7e34f9012374dc9411cafa8a3ff4e50"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#af7e34f9012374dc9411cafa8a3ff4e50" class="m-doc-self">mount</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>whether mount succeeded</td>
                </tr>
              </tfoot>
            </table>
<p>Mounts the SD card and virtual file systems to be accessed.</p>
          </div></section>
          <section class="m-doc-details" id="a7a2340367a4b95c94884be058ca0d063"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a7a2340367a4b95c94884be058ca0d063" class="m-doc-self">printCardInfo</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
<p>Prints information about the SD card.</p>
          </div></section>
          <section class="m-doc-details" id="a09eb67cb5d96201deaaefe38d04f17f3"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class FStream&gt;
              </div>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a09eb67cb5d96201deaaefe38d04f17f3" class="m-doc-self">openFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              ios_base::openmode mode,
              std::function&lt;bool(FStream&amp;)&gt;&amp;&amp; fileOp)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Template parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">FStream</td>
                  <td>the type of stream for the file</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>mode</td>
                  <td>the first open mode</td>
                </tr>
                <tr>
                  <td>fileOp</td>
                  <td>the operations to perform on the opened file</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether all operations completed successfully</td>
                </tr>
              </tfoot>
            </table>
<p>Opens a file with the specified file name and modes, then executes the provided operations on the file. After all operations are complete, the file gets closed safely to ensure all operations are synced with the virtual file system.</p>
          </div></section>
          <section class="m-doc-details" id="a87a48c4dfedceff48a209e951f299ee9"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a87a48c4dfedceff48a209e951f299ee9" class="m-doc-self">writeFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const vector&lt;string&gt;&amp; data)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>data</td>
                  <td>the data to write</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the data was successfully written</td>
                </tr>
              </tfoot>
            </table>
<p>Writes the provided data to the file specified by file name. This method truncates the entire file upon opening so the only data that will be in the file is what was passed as a parameter here.</p>
          </div></section>
          <section class="m-doc-details" id="a03ad22388a4c6f3f8265dbc204947cfd"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a03ad22388a4c6f3f8265dbc204947cfd" class="m-doc-self">writeBinFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const string&amp; data)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>data</td>
                  <td>the data to write</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the data was successfully written</td>
                </tr>
              </tfoot>
            </table>
<p>Writes the provided binary data to the file specified by file name. This method truncates the entire file upon opening so the only data that will be in the file is what was passed as a parameter here.</p>
          </div></section>
          <section class="m-doc-details" id="ab01f1777f4670c9cd4c04a0b3c6c2867"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ab01f1777f4670c9cd4c04a0b3c6c2867" class="m-doc-self">appendFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const vector&lt;string&gt;&amp; data)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>data</td>
                  <td>the data to append</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the data was successfully written</td>
                </tr>
              </tfoot>
            </table>
<p>Appends the provided data to the file specified by file name.</p>
          </div></section>
          <section class="m-doc-details" id="ad03e7421e12132dea157e3e3844233a1"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ad03e7421e12132dea157e3e3844233a1" class="m-doc-self">appendBinFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              const string&amp; data)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>data</td>
                  <td>the data to write</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the data was successfully written</td>
                </tr>
              </tfoot>
            </table>
<p>Appends the provided binary data to the file specified by file name.</p>
          </div></section>
          <section class="m-doc-details" id="a572558952919c50968f9b0063220be6b"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a572558952919c50968f9b0063220be6b" class="m-doc-self">readFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              string&amp; data)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>data</td>
                  <td>the destination</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the data was successfully read</td>
                </tr>
              </tfoot>
            </table>
<p>Reads content from the specified file into the data parameter.</p>
          </div></section>
          <section class="m-doc-details" id="a5a06abe7718fa74b84fadad7650bfdad"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool SDFileIO::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5a06abe7718fa74b84fadad7650bfdad" class="m-doc-self">readBinFile</a>(</span><span class="m-doc-wrap">const string&amp; fileName,
              string&amp; data)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fileName</td>
                  <td>the name of the file</td>
                </tr>
                <tr>
                  <td>data</td>
                  <td>the destination</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the data was successfully read</td>
                </tr>
              </tfoot>
            </table>
<p>Reads binary content from the specified file into the data parameter.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Red Cross. Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.15 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
